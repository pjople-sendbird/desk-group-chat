<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desk SDK - Group Chat</title>
    <!-- 
        BOOTSTRAP (OPTIONAL) 
    -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <!-- 
        AXIOS - MANDATORY FOR SENDBIRD SDK 
    -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.0/axios.min.js"></script>
    <!-- 
        SENDBIRD SDK 
    -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sendbird/3.0.148/SendBird.min.js"></script>
    <!--
        INCLUDE DESK SDK
    -->
    <script src="node_modules/sendbird-desk/SendBird.Desk.min.js"></script>
</head>
<body>
    <div class="container mt-4 text-center">

        <!--
            WELCOME MESSAGE
        -->
        <h4>
            Sendbird Desk Group Chat
        </h4>
        <p>
            This application will help you have a group conversation with an open ticket. <br>
            You can invite as many users as needed.
        </p>

        
        <!--
            CONNECTION BOX
        -->
        <div class="card mt-4" id="connectionContainer">
            <div class="card-header">
                Connect to Sendbird Desk
            </div>
            <div class="card-body">
                Enter your Sendbird Desk information and create a ticket.
                <hr>
                <table class="table">
                    <tr>
                        <td width="200">
                            <b>DESK Application ID</b>
                        </td>
                        <td>
                            <input type="text" id="appId" class="form-control" 
                                placeholder="Your DESK APP ID" 
                                value="" />    
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>USER ID</b>
                        </td>
                        <td>
                            <input type="text" id="userId" class="form-control mt-2" 
                                placeholder="User ID to connect..." 
                                value="" />    
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Your name</b>
                        </td>
                        <td>
                            <input type="text" id="name" class="form-control" 
                                placeholder="Your name..." 
                                value="" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Your message / problem:</b>
                        </td>
                        <td>
                            <input type="text" id="problem" class="form-control" 
                                placeholder="Describe your problem..." 
                                value="" />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="card-footer text-center">
                <button class="btn btn-primary" onclick="connect()">
                    Create Ticket
                </button>        
            </div>
        </div>
    


        <!--
            Invite user to conversation
        -->
        <div id="inviteUserContainer" class="mt-4" style="display:none">
            <table align="center" style="width:400px;"><tr>
                <td>
                    Invite user to conversation:
                </td>
                <td>
                    <input type="text" id="userIdToInvite" class="form-control" placeholder="User ID to invite..." />
                </td>
                <td align="center" width="90">
                    <button class="btn btn-primary" onclick="inviteUserToTicketDiscussion();">
                        Invite
                    </button>
                </td>
            </tr></table>
            <hr>
        </div>


        <!--
            Write a new message
        -->
        <div id="newMessageContainer" class="mt-4" style="display:none">
            <table align="center" style="width:400px;"><tr>
                <td>
                    <input type="text" id="messageInput" class="form-control" placeholder="Write your message..." />
                </td>
                <td align="center" width="90">
                    <button class="btn btn-primary" onclick="sendMessageToAgent();">
                        Send
                    </button>
                </td>
            </tr></table>
            <hr>
        </div>


        <!--
            Show list of messages sent to this channel
        -->
        <div class="container mt-4 d-flex justify-content-center">
            <div id="messagesContainer" style="min-width:400px;">
                Connect to see messages here.
            </div>
        </div>



    </div>    


    <script src="desk-client.js"></script>

</body>
</html>
